# BIDFLOW ìë™ ì½”ë“œ ë¦¬ë·°
# PR ìƒì„± ì‹œ Claude Opus 4.5ë¡œ ì½”ë“œ í’ˆì§ˆ/ë³´ì•ˆ/ì„±ëŠ¥ ê²€ìˆ˜

name: Claude Code Review

on:
  pull_request:
    types: [opened, synchronize, ready_for_review]
    paths:
      - 'src/**'
      - 'bidflow/**'

permissions:
  contents: read
  pull-requests: write
  id-token: write

jobs:
  code-review:
    runs-on: ubuntu-latest
    if: github.event.pull_request.draft == false

    steps:
      - name: Checkout
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: Claude Code Review
        uses: anthropics/claude-code-action@v1
        with:
          anthropic_api_key: ${{ secrets.ANTHROPIC_API_KEY }}
      - name: Post Review Comment
        uses: actions/github-script@v7
        with:
          script: |
            await github.rest.pulls.createReview({
              owner: context.repo.owner,
              repo: context.repo.repo,
              pull_number: context.payload.pull_request.number,
              event: 'COMMENT',
              body: 'ğŸ¤– **Claude Code Review ì™„ë£Œ**\n\nìë™ ê²€ìˆ˜ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ìœ„ ê²°ê³¼ë¥¼ ì°¸ê³ í•˜ì—¬ ì½”ë“œë¥¼ ê°œì„ í•´ì£¼ì„¸ìš”.'
            });
